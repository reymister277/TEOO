/* ========================================
   TEOO - Mobil Responsive Stiller
   Tam ekran mobil uyumluluk
   ======================================== */

/* === Mobil Hamburger Menü Butonu === */
.mobile-menu-btn {
    display: none;
    width: 36px;
    height: 36px;
    border-radius: var(--radius-md);
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    font-size: 18px;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-fast);
    z-index: 100;
    flex-shrink: 0;
}

.mobile-menu-btn:hover {
    background: var(--bg-hover);
    color: var(--text-primary);
}

/* === Mobil Overlay === */
.mobile-sidebar-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    z-index: 90;
    animation: fadeIn 0.2s ease;
}

.mobile-sidebar-overlay.active {
    display: block;
}

/* ============================
   TABLET (768px ve altı)
   ============================ */
@media (max-width: 768px) {
    :root {
        --sidebar-width: 260px;
        --server-bar-width: 60px;
        --members-width: 200px;
        --header-height: 48px;
    }

    .mobile-menu-btn {
        display: flex;
    }

    /* Sidebar — mobilde overlay olarak açılır */
    #sidebarContainer {
        position: fixed !important;
        top: 0;
        left: 0;
        height: 100vh;
        z-index: 95 !important;
        transform: translateX(-100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: none;
    }

    #sidebarContainer.mobile-open {
        transform: translateX(0);
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.5);
    }

    /* Chat tam genişlik kaplasın */
    #chatContainer {
        width: 100% !important;
        flex: 1 !important;
    }

    /* Üye paneli mobilde overlay */
    #membersContainer {
        position: fixed !important;
        top: 0;
        right: 0;
        height: 100vh;
        z-index: 95 !important;
        transform: translateX(100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: none;
    }

    #membersContainer.mobile-open {
        transform: translateX(0);
        box-shadow: -4px 0 20px rgba(0, 0, 0, 0.5);
    }

    /* Chat header - Sticky */
    .chat-header {
        padding: 0 12px !important;
        position: sticky !important;
        top: 0;
        z-index: 10;
        background: rgba(17, 19, 24, 0.95);
        backdrop-filter: blur(10px);
    }

    .chat-header-info h3 {
        font-size: 14px !important;
    }

    /* Chat mesajları - Input payı bırak */
    .messages-container {
        padding: 8px !important;
        padding-bottom: 80px !important;
        /* Input yüksekliği kadar boşluk */
    }

    .message-item {
        padding: 6px 8px !important;
    }

    .message-avatar {
        width: 32px !important;
        height: 32px !important;
        min-width: 32px !important;
        font-size: 14px !important;
    }

    /* Mesaj input - Fixed Bottom */
    .message-input-container {
        padding: 8px 12px !important;
        position: fixed !important;
        bottom: 0;
        left: 0;
        width: 100% !important;
        background: var(--bg-primary);
        z-index: 20;
        border-top: 1px solid var(--border);
    }

    .message-input-wrapper {
        padding: 6px 10px !important;
    }

    /* Server bar — kompakt */
    .server-bar {
        width: var(--server-bar-width) !important;
        min-width: var(--server-bar-width) !important;
    }

    .server-icon {
        width: 40px !important;
        height: 40px !important;
        font-size: 12px !important;
    }

    /* Channel sidebar — kompakt */
    .channel-sidebar {
        width: calc(var(--sidebar-width) - var(--server-bar-width)) !important;
        min-width: calc(var(--sidebar-width) - var(--server-bar-width)) !important;
    }

    /* User panel — kompakt */
    .user-panel {
        padding: 8px !important;
    }

    .user-panel-avatar {
        width: 30px !important;
        height: 30px !important;
        min-width: 30px !important;
        font-size: 14px !important;
    }

    .user-panel-name {
        font-size: 12px !important;
    }

    /* Voice panel — kompakt */
    .voice-controls-bar {
        gap: 4px !important;
    }

    .voice-control-btn {
        width: 30px !important;
        height: 30px !important;
        font-size: 14px !important;
    }

    /* Ekran paylaşım viewer */
    .screen-share-viewer {
        max-height: 40vh !important;
    }

    .screen-share-viewer video {
        max-height: 35vh !important;
    }
}

/* ============================
   TELEFON (480px ve altı)
   ============================ */
@media (max-width: 480px) {
    :root {
        --sidebar-width: 240px;
        --server-bar-width: 52px;
        --header-height: 44px;
    }

    /* Server bar — daha kompakt */
    .server-bar {
        width: var(--server-bar-width) !important;
        min-width: var(--server-bar-width) !important;
        padding: 6px 2px !important;
    }

    .server-icon {
        width: 36px !important;
        height: 36px !important;
        font-size: 11px !important;
    }

    /* Channel sidebar */
    .channel-sidebar {
        width: calc(var(--sidebar-width) - var(--server-bar-width)) !important;
        min-width: calc(var(--sidebar-width) - var(--server-bar-width)) !important;
    }

    /* Header — kompakt */
    .chat-header {
        padding: 0 8px !important;
        height: var(--header-height) !important;
    }

    .chat-header-actions {
        gap: 4px !important;
    }

    .chat-header-actions button {
        width: 30px !important;
        height: 30px !important;
        font-size: 14px !important;
    }

    /* Mesaja kompakt */
    .message-item {
        padding: 4px 6px !important;
        gap: 8px !important;
    }

    .message-avatar {
        width: 28px !important;
        height: 28px !important;
        min-width: 28px !important;
        font-size: 12px !important;
    }

    .message-author {
        font-size: 13px !important;
    }

    .message-text {
        font-size: 13px !important;
    }

    .message-time {
        font-size: 10px !important;
    }

    /* Mesaj input — kompakt */
    .message-input-container {
        padding: 6px 8px !important;
    }

    #messageInput {
        font-size: 14px !important;
    }

    /* Attachment — tam genişlik */
    .message-attachment {
        max-width: 100% !important;
    }

    .attachment-image {
        max-height: 200px !important;
    }

    .attachment-video {
        max-height: 200px !important;
    }

    /* Voice panel */
    .voice-connection {
        padding: 8px !important;
    }

    .voice-controls-bar {
        gap: 3px !important;
    }

    .voice-control-btn {
        width: 28px !important;
        height: 28px !important;
        font-size: 13px !important;
    }

    /* User panel */
    .user-panel {
        padding: 6px 8px !important;
        gap: 6px !important;
    }

    .user-panel-info {
        overflow: hidden;
    }

    .user-panel-name {
        font-size: 11px !important;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .user-panel-status {
        font-size: 10px !important;
    }

    /* Welcome message */
    .welcome-title {
        font-size: 20px !important;
    }

    .welcome-icon {
        width: 48px !important;
        height: 48px !important;
        font-size: 24px !important;
    }

    /* Home page */
    .home-quick-actions {
        flex-direction: column !important;
    }

    .home-friends-list,
    .home-servers-list {
        grid-template-columns: 1fr !important;
    }
}

/* ============================
   KÜÇÜK TELEFON (360px ve altı)
   ============================ */
@media (max-width: 360px) {
    :root {
        --server-bar-width: 48px;
    }

    .server-icon {
        width: 32px !important;
        height: 32px !important;
        font-size: 10px !important;
    }

    .chat-header-info h3 {
        font-size: 12px !important;
        max-width: 120px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .message-avatar {
        width: 24px !important;
        height: 24px !important;
        min-width: 24px !important;
        font-size: 10px !important;
    }
}

/* ============================
   LANDSCAPE MOD (Yatay tutuş)
   ============================ */
@media (max-height: 500px) and (orientation: landscape) {
    .chat-header {
        height: 40px !important;
    }

    .message-input-container {
        padding: 4px 8px !important;
    }

    .voice-panel {
        max-height: 35vh;
        overflow-y: auto;
    }

    .screen-share-viewer {
        max-height: 50vh !important;
    }
}

/* ============================
   DOKUNMA CİHAZI OPTİMİZASYONU
   ============================ */
@media (hover: none) and (pointer: coarse) {

    /* Daha büyük dokunma alanları */
    .channel-item {
        padding: 10px 12px !important;
        min-height: 40px;
    }

    .server-icon {
        min-height: 36px;
    }

    /* Hover efektlerini kaldır */
    .message-actions {
        opacity: 1 !important;
        position: relative !important;
        top: auto !important;
        right: auto !important;
        margin-top: 4px;
    }

    /* Scroll performansı */
    .messages-container,
    .channel-list,
    .server-bar,
    .members-list {
        -webkit-overflow-scrolling: touch;
    }

    /* Input zoom engelle */
    input,
    textarea,
    select {
        font-size: 16px !important;
    }
}